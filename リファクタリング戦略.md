# リファクタリング戦略
## 基本方針
書籍『リファクタリング』で紹介されるような、小さなステップで段階的かつ安全な手順で進める。
なおかつ自動テストがないコードベースに対して、書籍『レガシーコード改善ガイド』紹介されるような、まず自動テストを可能とする接合部を安全に作れるような手順で進める。

また上記のような安全な手順を取っていることがわかるよう、通常業務よりも細かい粒度でコミットログを残していく。

## 目指す形
RxSwiftを用いたMVVMを目指す。
ViewとViewModelの間は
- View -> ViewModelのイベント通知はメソッド呼び出し
- ViewModel -> Viewの状態更新はRxSwiftを用いたバインディング

で行う。

## 進め方案
1. リバーシのゲームとしての判定・状態管理が`BoardView`に代表されるViewの表示状態と結合しているため、切り離していく。
    1. `ReversiGameRepository`を作成し、ゲームのセーブ/ロードを委譲する。
    1. `ViewController`に`var game: ReversiGame`を作成し、ゲームの進行に合わせて`game`の状態も追従するようにする。
    1. ゲームの判定・状態管理を`ReversiGame`に移す。
1. ゲーム全体の進行ロジックを`ViewModel`に移す。
   ※ここは開始時点であまり戦略が浮かんでいないけれど、なるべく小さなステップで安全に進める。